let stdlib_area = internal._local_area("../../../lib/std")
let std = internal._import(internal._get_file(stdlib_area, "std.rain"))

let main = fn() {
	create_area_from_files()
}

let create_area_from_files = fn() {
	f = internal._create_file("hi", "hello.txt", false)
	g = internal._create_file("bye", "goodbye.txt", false)
	area = internal._create_area([f, g], true)
	if std.list.count(internal._glob(area)) != 2 {
		internal._throw("list wrong length")
	}
	metadata = internal._file_metadata(internal._get_file(area, "goodbye.txt"))
	if metadata.size != 3 {
		internal._throw("unexpected file size")
	}
	if internal._read_file(internal._get_file(area, "hello.txt")) != "hi" {
		internal._throw("unexpected contents of file")
	}
}
