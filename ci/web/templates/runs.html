{% extends "base.html" %}

{% block content %}
<h1>Runs</h1>
<table>
  <tr>
    <th>Repo</th>
    <th>Commit</th>
    <th>Created</th>
    <th>State</th>
    <th>Time</th>
  </tr>
  {% for (run_id, run) in runs %}
  <tr>
    <td><a href="{{ run.repository.repo_url() }}">{{ run.repository.owner }}/{{ run.repository.name }}</a></td>
    <td><a href="{{ run.commit_url() }}"><abbr title="{{ run.commit }}">{{ run.commit | truncate(5) }}</abbr></a></td>
    <td>{{ run.created_at | timestamp }}</td>
    <td>
      {% match run.finished %}
      {% when Some with (finished) %}
      {{ finished.status }}
      {% when None %}
      {{ run.state() }}
      {% endmatch %}
    </td>
    <td>
      {% match run.finished %}
      {% when Some with (finished) %}
      {{ finished.execution_time | duration }}
      {% when None %}
      {% endmatch %}
    </td>
    <td><a href="/run/{{run_id}}">View</a></td>
  </tr>
  {% endfor %}
</table>
{% endblock %}