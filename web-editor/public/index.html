<html>

<head>
  <script type="module">
  </script>
  <style type="text/css">
    #editor {
      position: absolute;
      top: 50px;
      bottom: 0;
      left: 0;
      right: 0;
    }
  </style>
</head>

<body>
  <button id="run">Run</button>
  <div id="editor">fn main() { print("Hello world") }</div>
  <script type="module">
    import init, {run_source} from "./rain/rain.js";
    import ace from "https://cdn.jsdelivr.net/npm/ace-builds@1.37.5/+esm";
    const editor = ace.edit("editor");

    init();
    document.querySelector("#run").addEventListener("click", () => {
      const source = editor.getValue();
      const output = run_source(source);
      console.log(output);
    });
  </script>

</body>

</html>