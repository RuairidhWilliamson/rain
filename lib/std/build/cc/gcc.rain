let std = import("std.rain")

let {File, String} = std.types

let gcc = std.escape.bin("gcc")

pub let compile = fn(src: File, outname: String) -> File {
	// Implictly requires cc for linking
	ld = std.escape.bin("ld")

	env = {PATH = "/usr/bin"}
	result = std.utils.run(std.utils.unit, gcc, [src, "-o", outname], env)
	if !result.success {
		std.utils._throw(result)
	}
	std.fs.file(result.area, outname)
}
